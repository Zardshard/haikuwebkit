From 007e7c68dce68c2dcced89a1af4759f1956d9ab7 Mon Sep 17 00:00:00 2001
From: Alice Mikhaylenko <alicem@gnome.org>
Date: Mon, 22 Apr 2024 17:18:11 +0400
Subject: [PATCH] wayland: Consistently handle enum type

Fixes https://gitlab.gnome.org/GNOME/gtk/-/issues/6649
---
 gdk/wayland/gdkdisplay-wayland.c | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/gdk/wayland/gdkdisplay-wayland.c b/gdk/wayland/gdkdisplay-wayland.c
index 70107360fe..bd260967e6 100644
--- a/gdk/wayland/gdkdisplay-wayland.c
+++ b/gdk/wayland/gdkdisplay-wayland.c
@@ -1917,6 +1917,7 @@ apply_portal_setting (TranslationEntry *entry,
       entry->fallback.s = g_intern_string (g_variant_get_string (value, NULL));
       break;
     case G_TYPE_INT:
+    case G_TYPE_ENUM:
       entry->fallback.i = g_variant_get_int32 (value);
       break;
     case G_TYPE_BOOLEAN:
@@ -2166,6 +2167,9 @@ set_value_from_entry (GdkDisplay       *display,
         case G_TYPE_BOOLEAN:
           g_value_set_boolean (value, entry->fallback.b);
           break;
+        case G_TYPE_ENUM:
+          g_value_set_enum (value, entry->fallback.i);
+          break;
         case G_TYPE_NONE:
           if (g_str_equal (entry->setting, "gtk-fontconfig-timestamp"))
             g_value_set_uint (value, (guint)entry->fallback.i);
-- 
2.44.0

